<html>
  <head>
    <title>STL Viewer</title>

    <link href="vendor/stlviewer.css" rel="stylesheet">

    <script src="vendor/three.js"></script>
    <script src="vendor/jquery.js"></script>
    <script src="vendor/dat.gui.min.js"></script>
    <script src="vendor/stats.min.js"></script>

    <script src="main.js"></script>

    <script>

      $(document).ready(function() {

        // Enable Stats
        var stats = new Stats();
        stats.setMode( 0 ); // 0: fps, 1: ms, 2: mb

        // align top-left
        stats.domElement.style.position = 'absolute';
        stats.domElement.style.left = '0px';
        stats.domElement.style.top = '0px';

        document.body.appendChild( stats.domElement );

        var id = "stlviewer";
        var viewer = new All3DP.ModelViewer(document.getElementById(id),{"stats":stats,"dragDrop":true, "autoRotate":true});

        window.viewer = viewer;

        var gui = new dat.GUI();

        var Configuration = function() {
          this.color   = "#c3b9b9";
          this.BodyBgColor = "#000000";
          this.wireframe = false;
          this.plane = false;
          this.boundingBox = false;
          this.sphere = false;
          this.axis = false;
          this.autorotate = true;
          this.material = true;

          this.model = '';
          this.modelSamples = {
            "Metatron":  "model/metatron.stl",
            "Snowman":   "model/snowman.stl",
            "3D Benchy": "model/3DBenchy.stl",
            "3D Buddha": "model/buddha_flat_bottom.stl"
          }

        };
        var cfg = new Configuration();

        // Load default stl
        viewer.load('model/metatron.stl');

        gui.addColor(cfg, 'color').onChange(function(colorValue) {
          viewer.setModelColorByHexcode(colorValue);
        });

        gui.addColor(cfg, 'BodyBgColor').onChange(function(colorValue) {
          document.body.style.background = colorValue;
        });

        gui.add(cfg, 'wireframe').onChange(function(val){
          viewer.toggleModelWireframe();
        });

        gui.add(cfg, 'plane').onChange(function(val){
          viewer.togglePlane();
        });

        gui.add(cfg, 'boundingBox').onChange(function(val){
          viewer.toggleBoundingBox();
        });

        gui.add(cfg, 'sphere').onChange(function(val){
          viewer.toggleSphere();
        });

        gui.add(cfg, 'axis').onChange(function(val){
          viewer.toggleAxis();
        });

        gui.add(cfg, 'autorotate').onChange(function(val){
          viewer.toggleAutoRotate();
        });

        gui.add(cfg, 'material').onChange(function(val){
          viewer.toggleMaterial();
        });

        gui.add(cfg, 'model', cfg.modelSamples).onChange(function(val){
          viewer.load(val,function(){
            viewer.setModelColorByHexcode(cfg.color);
          });
        });

        gui.close();

      });
    </script>

  </head>
  <body>

    <div id="stlviewer"></div>

    <div class="settings">Drag and drop STL files (binary or ascii) to the window to display.</div>


  </body>
</html>